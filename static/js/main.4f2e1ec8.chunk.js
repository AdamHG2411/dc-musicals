(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(8),r=a.n(s),o=(a(15),a(2)),i=a(3),l=a(5),u=a(4),p=a(1),m=a(6),d=(a(16),a(17),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),console.log("ListItem: handleClick");var t=this.props.performance;this.props.updateSelection(t)}},{key:"render",value:function(){return console.log("ListItem: render"),c.a.createElement("button",{className:"ListItem-Button",onClick:this.handleClick},c.a.createElement("p",null,this.props.performance.musicalName),c.a.createElement("p",null,this.props.performance.venueName),c.a.createElement("p",{className:"ListItem-Dates"},"".concat(this.props.performance.dates.start.slice(5,7),"/").concat(this.props.performance.dates.start.slice(8,10)," - ").concat(this.props.performance.dates.end.slice(5,7),"/").concat(this.props.performance.dates.end.slice(8,10))))}}]),t}(n.Component)),h=(a(18),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={dataLoaded:!1},a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log("List: render"),this.props.listedPerformances?c.a.createElement("div",{className:"List"},this.props.listedPerformances.map(function(t){return c.a.createElement(d,Object.assign({},t,{updateSelection:e.props.updateSelection}))})):(console.log("data not loaded"),null)}},{key:"componentDidMount",value:function(){if(console.log("List: componentDidMount"),0===this.props.listedPerformances.length||void 0===this.props.listedPerformances)return null;this.setState({dataLoaded:!0})}}]),t}(n.Component)),f=(a(19),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).render=a.render.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(console.log("Venue: render"),this.props.venueData){var e=this.props.venueData.name?this.props.venueData.name:"error",t=this.props.venueData.location.street?this.props.venueData.location.street:"error",a=this.props.venueData.location.city?this.props.venueData.location.city:"error",n=this.props.selection.tickets.buy?this.props.selection.tickets.buy:"error";return c.a.createElement("div",{className:"Venue"},c.a.createElement("div",{className:"Venue-Info"},c.a.createElement("p",{className:"Venue-Name"},e),c.a.createElement("p",null,t),c.a.createElement("p",null,a)),c.a.createElement("div",{className:"Venue-Tickets"},c.a.createElement("a",{className:"Venue-GetTickets",href:"".concat(n)},"Get Tickets")))}return null}}]),t}(n.Component)),v=(a(20),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).render=a.render.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Musical: render"),this.props.musicalData?c.a.createElement("div",null,c.a.createElement("div",{className:"Musical"},c.a.createElement("p",{className:"Musical-Name"},this.props.musicalData.name," (",this.props.musicalData.premiereYear,")"),c.a.createElement("p",{className:"Musical-Composer"},this.props.musicalData.composer)),c.a.createElement("div",null,c.a.createElement("h2",null,"Tracklist"),c.a.createElement("iframe",{title:"SpotifyPlayer",src:"https://open.spotify.com/embed/album/".concat(this.props.musicalData.spotifyURL),width:"380",height:"380",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}))):null}}]),t}(n.Component)),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={performanceData:null,performanceDataLoaded:!1,sortedData:null,listedPerformances:[],selection:null,venueData:null,musicalData:null},a.render=a.render.bind(Object(p.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a.updateSelection=a.updateSelection.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateSelection",value:function(e){var t=this;this.setState({selection:e}),fetch("https://musicals-api.herokuapp.com/api/venues/".concat(e.venueCode)).then(function(a){a.json().then(function(a){fetch("https://musicals-api.herokuapp.com/api/musicals/".concat(e.musicalName)).then(function(e){e.json().then(function(e){t.setState({venueData:a,musicalData:e})})})})})}},{key:"render",value:function(){return console.log("App: render"),c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"App-Header"},"DC Musicals"),c.a.createElement("div",{className:"App-Body"},c.a.createElement("div",{className:"App-UpcomingList"},c.a.createElement("h2",null,"Upcoming Performances"),c.a.createElement(h,{listedPerformances:this.state.listedPerformances,className:"App-PerformanceList",updateSelection:this.updateSelection})),c.a.createElement("div",{className:"App-SelectedPerformance"},c.a.createElement("h2",null,"Venue"),c.a.createElement(f,{className:"App-SelectedVenue",venueData:this.state.venueData,musicalData:this.state.musicalData,selection:this.state.selection}),c.a.createElement("h2",null,"Musical"),c.a.createElement(v,{className:"App-SelectedMusical",musicalData:this.state.musicalData}))))}},{key:"componentDidMount",value:function(){var e=this;console.log("App: componentDidMount"),fetch("https://musicals-api.herokuapp.com/api/performances/").then(function(e){return e.json()}).then(function(t){e.setState({performanceData:t})}).then(function(){if(e.state.performanceData){e.setState({sortedData:e.state.performanceData.sort(function(e,t){var a=new Date(e.dates.start),n=new Date(t.dates.start);return a<n?-1:a>n?1:0})});for(var t=0;t<e.state.sortedData.length;t++)e.state.listedPerformances.push({performance:e.state.sortedData[t],key:t});e.setState({performanceDataLoaded:!0})}})}}]),t}(n.Component);r.a.render(c.a.createElement(b,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.4f2e1ec8.chunk.js.map